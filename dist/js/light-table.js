class LightTable{constructor(t){this.options={selector:"table",stickyHead:!1,search:!1,pagination:!1,paginationPerPage:10,theme:"black",labels:{searchAnyThing:"Search any thing"},...t},this.labels=this.options.labels;t=document.querySelectorAll(this.options.selector);0!=t.length&&(console.log("this.options.selector",this.options.selector),t.forEach(t=>{var e=Math.floor(1e3*Math.random())+1+(Math.floor(100*Math.random())+1),a=document.createElement("div"),l=(a.setAttribute("data-id","lt-table-"+e),a.setAttribute("data-pagination",this.options.pagination?"yes":"no"),a.setAttribute("data-pagination_items",this.options.paginationPerPage),a.setAttribute("data-sort",0),a.setAttribute("data-sort_type",1),t.parentNode.insertBefore(a,t),a.classList.add("lt-table"),a.classList.add("lt-"+this.options.theme),document.createElement("div")),r=(l.classList.add("lt-table-header"),a.appendChild(l),document.createElement("div")),r=(r.classList.add("lt-table-table"),r.innerHTML=t.outerHTML,a.appendChild(r),document.createElement("div"));r.classList.add("lt-table-footer"),a.appendChild(r),t.setAttribute("data-id","lt-table-"+e),t.style.display="none",t.setAttribute("id","lt-table-hidden-"+e),this.options.stickyHead&&a.classList.add("lt-sticky"),this.options.search&&(t=Math.floor(1e3*Math.random())+1,(e=document.createElement("div")).classList.add("lt-table-search"),e.innerHTML='<label for="lt-table-search'+t+'">'+this.labels.searchAnyThing+':</label><input type="text" id="lt-table-search'+t+'" name="lt-table-search'+t+'" />',l.appendChild(e),a.querySelectorAll(".lt-table-search input").forEach(t=>{t.addEventListener("input",LightTable.#inputChanged)})),this.options.pagination&&((t=document.createElement("div")).classList.add("lt-table-pagination"),t.innerHTML="",r.appendChild(t),LightTable.#reloadData(a,1)),a.querySelectorAll('th[data-sortable="yes"]').forEach(t=>{t.addEventListener("click",function(t){var e=t.target.parentElement.parentElement.parentElement.parentElement.parentElement,t=t.target,t=[...t.parentNode.children].indexOf(t),t=(e.setAttribute("data-sort",t),1===parseInt(e.dataset.sort_type)?2:1);e.setAttribute("data-sort_type",t),LightTable.#reloadData(e,1)})})}))}static#reloadData(t,e){LightTable.#buildPagination(t),LightTable.#doSearch(t),LightTable.#doSort(t),LightTable.#goToPage(t,1)}static#doSort(t){let r=parseInt(t.dataset.sort);var e=parseInt(t.dataset.sort_type),t=t.querySelectorAll("table")[0];let a=[];const n=t.querySelectorAll("tbody tr");n.forEach(t=>{t=t.querySelectorAll("td:nth-child("+(r+1)+")")[0].textContent;a.push(t)}),a.every(function(t){return/^-?\d+$/.test(t)})?a.sort(function(t,e){return t-e}):a.sort(),2===e&&a.reverse(),(a=new Set(a)).forEach(l=>{n.forEach(t=>{var e,a=t.parentElement;t.querySelectorAll("td:nth-child("+(r+1)+")")[0].textContent===l&&((e=document.createElement("tr")).innerHTML=t.innerHTML,t.remove(),a.insertBefore(e,a.firstElementChild))})})}static#inputChanged(t){t=t.target.parentElement.parentElement.parentElement;LightTable.#reloadData(t,1)}static#goToPage(t,e){t.dataset.id;var a=parseInt(t.dataset.pagination_items),l=document.querySelectorAll('.lt-table[data-id="'+t.dataset.id+'"] table')[0];document.querySelectorAll('table[data-id="'+t.dataset.id+'"]')[0],l.querySelectorAll("tbody")[0];let r=(e-=1)*a+1,n=r+a,o=0;t.querySelectorAll("table tbody tr").forEach(t=>{(++o<r||o>=n)&&t.remove()}),t.querySelectorAll(".lt-table-pagination button").forEach(t=>{t.classList.remove("current")}),t.querySelectorAll('.lt-table-pagination button[data-page="'+(e+1)+'"]')[0].classList.add("current")}static#buildPagination(t){t.dataset.id;var e=t.querySelectorAll(".lt-table-pagination")[0],a=document.querySelectorAll('.lt-table[data-id="'+t.dataset.id+'"] table')[0],l=t.dataset.pagination_items,t=(LightTable.#doSearch(t),a.querySelectorAll("tbody tr").length),r=Math.ceil(t/l);let n="";for(let t=1;t<=r;t++)n+='<button data-page="'+t+'" class="'+(1==t?"current":"")+' lt-table-toggle-pagination">'+t+"</button>";e.innerHTML=n;for(var o=e.querySelectorAll("button"),i=0;i<o.length;i++)o[i].addEventListener("click",function(t){var e=this.parentElement.parentElement.parentElement,a=this.dataset.page;LightTable.#doSearch(e),LightTable.#doSort(e),LightTable.#goToPage(e,a)},!1)}static#doSearch(t){t.dataset.id;var e=document.querySelectorAll('.lt-table[data-id="'+t.dataset.id+'"] table')[0],l=document.querySelectorAll('table[data-id="'+t.dataset.id+'"]')[0],e=e.querySelectorAll("tbody")[0];let r="";var a=t.querySelectorAll(".lt-table-search input").length;if(0==(r=0<a?t.querySelectorAll(".lt-table-search input")[0].value.toLowerCase():r).length)e.innerHTML=l.querySelectorAll("tbody")[0].outerHTML;else{let a=e.innerHTML="";l.querySelectorAll("tbody tr").forEach(t=>{let e="";t.querySelectorAll("td:not(.lt-exclude-search)").forEach(t=>{e+=" "+t.textContent.toLowerCase()}),e.includes(r)&&(a+=t.outerHTML)}),e.innerHTML=a}}}